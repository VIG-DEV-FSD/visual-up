"use strict";$(function(){var t;document.addEventListener("change",function(){var e,s=event.target,t=s.type,i=s.closest("form"),r=c[i].indexOf(s);switch(t){case"text":e=/^[a-zA-Zа-яА-Я][a-zA-Zа-яА-Я]+$/,s.value?e.test(s.value)?(i.nameValid=!0,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.add("success"),c[i].splice(r,1),a(i)):(i.nameValid=!1,s.closest(".input-wrapper").classList.remove("success"),s.closest(".input-wrapper").classList.add("error"),c[i].push(s),o(i)):(i.nameValid=!1,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.remove("success"),c[i].splice(r,1),a(i));break;case"email":e=/^[\w-.]+@([-\w]+\.)+[-\w]+$/,s.value?e.test(s.value)?(i.emailValid=!0,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.add("success"),c[i].splice(r,1),a(i)):(i.emailValid=!1,s.closest(".input-wrapper").classList.remove("success"),s.closest(".input-wrapper").classList.add("error"),c[i].push(s),o(i)):(i.emailValid=!1,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.remove("success"),c[i].splice(r,1),a(i));break;case"checkbox":s.checked?(c[i].splice(r,1),a(i)):(c[i].push(s),o(i));break;case"file":!function(e){var s=e.files.length,t=e.closest("form"),i=e.closest(".discus__form-file").querySelector(".discus-file__content");5<s?(i.innerHTML=880<document.documentElement.clientWidth?"Можно выбрать максимум 5 файлов":"!",i.style.display="flex",i.classList.add("error"),t.fileValid=!1):0==s?(i.innerHTML="",i.style.display="none",i.classList.remove("error"),t.fileValid=!1):(i.innerHTML=1==s?880<document.documentElement.clientWidth?"Выбран 1 файл":"1":5==s?880<document.documentElement.clientWidth?"Выбрано 5 файлов":"5":880<document.documentElement.clientWidth?"Выбрано "+s+" файла":s,i.classList.remove("error"),i.style.display="flex",t.fileValid=!0)}(s)}}),document.addEventListener("submit",function(){event.preventDefault();var e=event.target.closest("form"),s={};e.name&&(e.nameValid?s.name=e.name.value:c[e].push(e.name));e.tel&&(e.telValid?s.phone=e.tel.value:c[e].push(e.tel));e.email&&(e.emailValid?s.email=e.email.value:c[e].push(e.email));e.textarea&&e.textarea.value&&(s.comment=e.textarea.value);e.file&&e.fileValid&&(s.files=e.file.files);if(0!=c[e].length){o(e);var t=!0,i=!1,r=void 0;try{for(var n,l=c[e][Symbol.iterator]();!(t=(n=l.next()).done);t=!0)err=n.value,err.closest(".input-wrapper").classList.remove("success"),err.closest(".input-wrapper").classList.add("error")}catch(e){i=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw r}}return}if(!e.confirm.checked)return void o(e);e.closest(".modal")&&(e.closest(".modal").querySelector(".modal__body").innerHTML='<div class="modal__title modal__title-thanks">Заявка принята!</div><div class="modal__text modal__text-thanks">Спасибо, что выбрали нас!</div><div class="modal__thanks"><img src="img/thanks.png" alt=""></div><div class="modal__descr modal__descr-thanks">Рекомендуем подписаться на наши социальные сети и получить скидку 10%</div><div class="messengers"><a href="https://www.instagram.com/visual.up/" class="messenger"><img src="img/instagram.png" alt=""></a><a href="https://www.behance.net/visual_up" class="messenger"><img src="img/behance.png" alt=""></a></div>',600<document.documentElement.clientWidth&&(e.closest(".modal").querySelector(".modal__body").style.background="none"))}),$(document).on("change",function(){var e=event.target;if(e.closest(".checkbox-wrapper")){var s=e.closest(".checkbox-wrapper");s.querySelector("input").checked?s.querySelector(".checkbox").classList.add("checked"):s.querySelector(".checkbox").classList.remove("checked")}}),$(".header__menu-btn").on("click",function(){var e=document.querySelector(".nav").innerHTML,s=document.querySelector(".header__com").innerHTML;$(".header__menu-body").html(e+'<div class="header__com">'+s+"</div>"),$(".header__menu").slideDown(800)}),$(".header__menu").on("click",function(){event.target.closest(".close")&&$(".header__menu").slideUp(800)}),$('input[type="tel"]').each(function(){$(this).mask("+7 (000) 000 00 00",{onChange:function(e,s){clearTimeout(t),t=setTimeout(function(){!function(e,s){var t=s.target,i=t.closest("form"),r=c[i].indexOf(t);0==e.length?(i.telValid=!1,t.closest(".input-wrapper").classList.remove("error"),t.closest(".input-wrapper").classList.remove("success"),c[i].splice(r,1),a(i)):18==e.length?(i.telValid=!0,t.closest(".input-wrapper").classList.remove("error"),t.closest(".input-wrapper").classList.add("success"),c[i].splice(r,1),a(i)):(i.telValid=!1,t.closest(".input-wrapper").classList.remove("success"),t.closest(".input-wrapper").classList.add("error"),c[i].push(t),o(i))}(e,s)},800)}})});var c={};if(document.querySelectorAll("form").forEach(function(e){c[e]=[]}),1e3<document.documentElement.clientWidth){var e=$("#scene").get(0);new Parallax(e)}$(".main-screen__text").slick({arrows:!1,dots:!0,infinite:!0,dotsClass:"main-screen__text-dots dots",autoplay:!0,autoplaySpeed:4e3,fade:!0,speed:1e3,responsive:[{breakpoint:741,settings:{dots:!1}}]}),$(document).on("click",function(){if(event.target.closest(".btn-count")){event.preventDefault();var e=document.querySelector("#modal-count");e.style.display="flex",document.body.style.overflow="hidden",e.addEventListener("click",function(){d(event,e)}),document.addEventListener("keyup",function(){d(event,e)})}});var s=document.querySelector(".services__inner"),i=s.querySelector(".services__item-main");function r(){document.documentElement.clientWidth<1031&&!$(".services__inner").hasClass("slick-slider")?(i.classList.remove("active"),s.removeEventListener("mouseover",n),s.removeEventListener("mouseout",l),$(".services__inner").slick({slidesToShow:3,slidesToScroll:1,dotsClass:"dots services__dots",arrows:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"30px",autoplay:2e3,infinite:!0,initialSlide:2,dots:!0,responsive:[{breakpoint:955,settings:{centerMode:!1,slidesToShow:1}}]})):1031<=document.documentElement.clientWidth&&$(".services__inner").hasClass("slick-slider")&&($(".services__inner").slick("unslick"),i.classList.add("active"),s.addEventListener("mouseover",n),s.addEventListener("mouseout",l)),document.documentElement.clientWidth<971&&!$(".reviews__inner").hasClass("slick-slider")?$(".reviews__inner").slick({slidesToShow:1,slidesToScroll:1,dotsClass:"dots reviews__dots",arrows:!1,autoplay:2e3,infinite:!0,dots:!0}):971<=document.documentElement.clientWidth&&$(".reviews__inner").hasClass("slick-slider")&&$(".reviews__inner").slick("unslick")}function n(){var e=event.target;e.closest(".services__item")&&e.closest(".services__item")!=i&&(i.classList.remove("active"),(i=e.closest(".services__item")).classList.add("active"))}function l(){i.contains(event.relatedTarget)||(i.classList.remove("active"),(i=s.querySelector(".services__item-main")).classList.add("active"))}function o(e){(e.closest("section")||e.closest(".modal")).querySelector(".form-error").style.display="block"}function a(e){0==c[e].length&&((e.closest("section")||e.closest(".modal")).querySelector(".form-error").style.display="none")}function d(e,s){var t=e.target;(t.closest(".close")||t.classList.contains("modal")||"Escape"==e.key)&&(s.style.display="none",document.body.style.overflow="auto",s.removeEventListener("click",d),document.removeEventListener("keyup",d))}i.classList.add("active"),s.addEventListener("mouseover",n),s.addEventListener("mouseout",l),r(),$(window).resize(function(){r()}),$(".portfolio__slider").slick({slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:5e3,fade:!0,speed:1e3,infinite:!0,nextArrow:'<button class="slick-next portfolio-next"><img src="img/arrow-right.png"></button>',prevArrow:'<button class="slick-prev portfolio-prev"><img src="img/arrow-left.png"></button>',responsive:[{breakpoint:768,settings:{arrows:!1}}]})});