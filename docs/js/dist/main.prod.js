"use strict";$(function(){if(1e3<document.documentElement.clientWidth){var e=$("#scene").get(0);new Parallax(e)}$(".main-screen__text").slick({arrows:!1,dots:!0,infinite:!0,dotsClass:"main-screen__text-dots",autoplay:!0,autoplaySpeed:4e3,fade:!0,speed:1e3,responsive:[{breakpoint:741,settings:{dots:!1}}]}),$(".header__menu-btn").on("click",function(){var e=document.querySelector(".nav").innerHTML,s=document.querySelector(".header__com").innerHTML;$(".header__menu-body").html(e+'<div class="header__com">'+s+"</div>"),$(".header__menu").slideToggle(800)}),$(".header__menu").on("click",function(){event.target.closest(".close")&&$(".header__menu").slideToggle(800)}),$(document).on("change",function(){var e=event.target;if(e.closest(".checkbox-wrapper")){var s=e.closest(".checkbox-wrapper");s.querySelector("input").checked?s.querySelector(".checkbox").classList.add("checked"):s.querySelector(".checkbox").classList.remove("checked")}}),$(document).on("click",function(){if(event.target.closest(".btn-count")){event.preventDefault();var n,o=document.querySelector("#modal-count");o.style.display="flex",document.body.style.overflow="hidden";var s,e=o.querySelector('input[type="tel"]');$(e).mask("+7 (000) 000 00 00",{onChange:function(e){clearTimeout(s),s=setTimeout(function(){!function(e){var s=o.querySelector('input[type="tel"]'),t=s.closest("form");n=e;var r=i.indexOf(s);0==e.length?(t.telValid=!1,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.remove("success"),i.splice(r,1),l()):18==e.length?(t.telValid=!0,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.add("success"),i.splice(r,1),l()):(t.telValid=!1,s.closest(".input-wrapper").classList.remove("success"),s.closest(".input-wrapper").classList.add("error"),i.push(s),p())}(e)},1e3)}});var i=[];o.addEventListener("click",t),document.addEventListener("keyup",t),o.addEventListener("change",d),o.addEventListener("submit",u)}function d(){var e,s=event.target,t=s.type,r=s.closest("form"),a=i.indexOf(s);switch(t){case"text":e=/^[a-zA-Zа-яА-Я][a-zA-Zа-яА-Я]+$/,s.value?e.test(s.value)?(r.nameValid=!0,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.add("success"),i.splice(a,1),l()):(r.nameValid=!1,s.closest(".input-wrapper").classList.remove("success"),s.closest(".input-wrapper").classList.add("error"),i.push(s),p()):(r.nameValid=!1,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.remove("success"),i.splice(a,1),l());break;case"email":e=/^[\w-.]+@([-\w]+\.)+[-\w]+$/,s.value?e.test(s.value)?(r.emailValid=!0,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.add("success"),i.splice(a,1),l()):(r.emailValid=!1,s.closest(".input-wrapper").classList.remove("success"),s.closest(".input-wrapper").classList.add("error"),i.push(s),p()):(r.emailValid=!1,s.closest(".input-wrapper").classList.remove("error"),s.closest(".input-wrapper").classList.remove("success"),i.splice(a,1),l());break;case"checkbox":s.checked?(i.splice(a,1),l()):(i.push(s),p())}}function u(){event.preventDefault();var e=event.target.closest("form"),s={};if(e.name&&(e.nameValid?s.name=e.name.value:i.push(e.name)),e.tel&&(e.telValid?s.phone=n:i.push(e.tel)),e.email&&(e.emailValid?s.email=e.email.value:i.push(e.email)),0==i.length)e.confirm.checked?(o.querySelector(".modal__body").innerHTML='<div class="modal__title modal__title-thanks">Заявка принята!</div><div class="modal__text modal__text-thanks">Спасибо, что выбрали нас!</div><div class="modal__thanks"><img src="img/thanks.png" alt=""></div><div class="modal__descr modal__descr-thanks">Рекомендуем подписаться на наши социальные сети и получить скидку 10%</div><div class="messengers"><a href="https://www.instagram.com/visual.up/" class="messenger"><img src="img/instagram.png" alt=""></a><a href="https://www.behance.net/visual_up" class="messenger"><img src="img/behance.png" alt=""></a></div>',600<document.documentElement.clientWidth&&(o.querySelector(".modal__body").style.background="none"),o.removeEventListener("change",d),o.removeEventListener("submit",u)):p();else{p();var t=!0,r=!1,a=void 0;try{for(var l,c=i[Symbol.iterator]();!(t=(l=c.next()).done);t=!0)err=l.value,err.closest(".input-wrapper").classList.remove("success"),err.closest(".input-wrapper").classList.add("error")}catch(e){r=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw a}}}}function p(){o.querySelector(".modal__error").style.display="block"}function l(){0==i.length&&(o.querySelector(".modal__error").style.display="none")}function t(){var e=event.target;(e.closest(".close")||e.classList.contains("modal")||"Escape"==event.key)&&(o.style.display="none",document.body.style.overflow="auto",o.removeEventListener("click",t),document.removeEventListener("keyup",t),o.removeEventListener("change",d),o.removeEventListener("submit",u))}}),$(".portfolio__slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!0,nextArrow:'<button class="slick-next portfolio-next"><img src="img/arrow-right.png"></button>',prevArrow:'<button class="slick-prev portfolio-prev"><img src="img/arrow-left.png"></button>'})});